<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.72 [en] (WinNT; U) [Netscape]">
   <title>HDFView User's Guide -- HDF Object Model</title>
</head>

<!-- BEGIN OF THE BODY -->
<body text="#000000" bgcolor="#FFFFFF" link="#0000EE" vlink="#551A8B" alink="#FF0000">

<a href="index.html">[Index]</a>
<a href="ug01introduction.html">[1]</a>
<a href="ug02start.html">[2]</a>
<a href="ug03objects.html">[3]</a>
<a href="ug04treeview.html">[4]</a>
<a href="ug05spreadsheet.html">[5]</a>
<a href="ug06imageview.html">[6]</a>
<a href="ug07textview.html">[7]</a>


<h1>
Chapter 3: HDF Object Model</h1>

<p>
HDF files may contain many types of data objects that a scientist
might need. HDFView displays the data objects appropriately according their
types. For example, an two dimension dataset with an associated palette
will be displayed as an image. When you open an HDF file with HDFView,
you see the tree structure of an HDF file, showing the objects and their
groupings. You can select an object from the tree to view its content.

<p>
HDF4 (i.e. HDF version 4) is based on the original 1988 version of HDF.  
Versions 1, 2, 3, and 4 of HDF were all backward compatible, and HDF4 
can access files created by all earlier versions, but HDF5 is a completely 
new format and library.  Although they are conceptually related, HDF4 and 
HDF5 files cannot be read by the HDF4 library and vice versa.  HDF5 was 
designed to address some of the limitations of HDF4, and also to address 
and exploit current and anticipated requirements of modern systems and 
applications.

<p>
HDFView is built on a common HDF object model and suports both versions of HDF.
The HDF object model was designed in such a way that the HDF4 and HDF5 objects 
interact with users through a common object layer so the user interface 
design will be independent of the file format (HDF4 or HDF5). Such a design 
allows the HDFView to support and convert objects of different formats 
(HDF4 and HDF5).

<p>
This chapter provides basic information of the HDF object model. For more
details of the object model, visit the HDF Object Model website at
<a href="http://hdf.ncsa.uiuc.edu/hdf-java-html/hdf-object/">
http://hdf.ncsa.uiuc.edu/hdf-java-html/hdf-object/ </a>

<dl>
<dt><a href="ug03objects.html#ug03definition">3.1 What it is</a></dt>
<dt><a href="ug03objects.html#ug03hierarchy">3.2 The Class Hierarchy</a></dt>
<dt><a href="ug03objects.html#ug03application">3.3 How to Use it</a></dt>
</dl>

<hr noshade size=1>

<h2>
<a NAME="ug03definition"></a>3.1 What it is</h2>

The <b>HDF Object Package</b> is a Java package which implement HDF4 and
HDF5 data objects in an object-oriented form. The HDF Java Object Package
provides common standard Java APIs to access both HDF4 and HDF5 files.
<p>The HDF Object Package is <b>NOT</b> a "wrapper" for the native HDF
libraries and it requires the HDF4 and HDF5 wrapper.
The HDF4 and HDF5 wrappers are separate HDF Java products. For
details of the HDF4 and HDF5 native interfaces, read 
<a href="http://hdf.ncsa.uiuc.edu/hdf-java-html/JNI/jhi/index.html">
NCSA Java HDF Interface (JHI)</a> 
and
<a href="http://hdf.ncsa.uiuc.edu/hdf-java-html/JNI/jhi5/index.html">
NCSA Java HDF5 Interface (JHI5)</a>. 

<p>
The HDF Object Package implements higher 
level APIs and encapsulates HDF library calls into an object oriented fashion 
for easy access to HDF files. For example, to trieve data content from an
HDF5 dataset by using HDF5 library APIs directly, you have to make many 
calls such as get the datatype information (datatype class, size, sign, 
and etc), get the dataspace information (number of dimension, dimension
sizes), and allocate the data buffer. The HDF Object pacakge put all these
calls into one single call read(). 

<p>The HDF Object Package, <i>ncsa.hdf.object</i>, provides classes that
reflect fundamental conceptual to design of HDF objects. Objects
of HDF5 (group and dataset) and HDF4 (group, multi-dimension array, raster
image, vdata and annotation) are presented as Java classes.
<p>The HDF object package has two major goals. First, it simplifies the
process of reading information from or writing data to file because the
details of accessing to the HDF library are encapsulated into respective
classes. Second, HDF4 and HDF5 objects are inherited from the same common object
and interface. Applications can use of the HDF Object Package to access
objects from either HDF4 or HDF5 in a uniform way, without accessing the
libraries directly.

<h2>
<a NAME="ug03hierarchy"></a>3.2 The Class Hierarchy</h2>

The HDF Object Package implements an abstract data model, and the objects
of the HDF4 and HDF5 data models are represented as instances of the abstract
objects. The abstract class <b>HObject</b> has two fundamental abstract
classes are <b>Group</b> and <b>Dataset</b>, and all HDF5 and HDF4 objects
are a sub-type of one of these abstract classes.

<p>Figure 3.1 shows the class hierarchy of the HDF Object Package. In the 
following, we give brief description of these Java classes of HDF objects.
For details, see the Java docs at
<a href="http://hdf.ncsa.uiuc.edu/hdf-java-html/hdf-object/javadocs/">
http://hdf.ncsa.uiuc.edu/hdf-java-html/hdf-object/javadocs/ </a>

<p>
The classes at the upper of the class hierarchy are interfaces and abstract
classes. These interfaces and abstract classes define all the necessary public
APIs to retrieve information and data from HDF files. The classes at the bottom
are the implementing classes, which implement the public APIs defined at the
upper classes.

<center>
<p><img SRC="images/class_diagram_object.jpg" height=541 width=703>
<br><b>Figure 3.1. The Class Hierarchy of HDF Objects.</b></center>

<p><br>


<P>

<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Interface Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><I>DataFormat</I></B></TD>
<TD>This interface describes general I/O operations of data object,
 such as read data content or data attribute into memory, write
 data content or data attribute into disk.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><I>FileFormat</I></B></TD>
<TD>This FileFormat defines general I/O accessing interface to file resources,
 such as open/close file, and retrieve the file structure.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B><I>Metadata</I></B></TD>
<TD>Metadata is a general interface about supporting data.</TD>
</TR>
</TABLE>

<P>

<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Class Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>Attribute</B></TD>
<TD>Attribute holds a (name, value) pair of HDF4/5 attribute.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>CompoundDS</B></TD>
<TD>CompoundDS is the superclass for HDF4 and HDF5 Compound Dataset.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>Dataset</B></TD>
<TD>Dataset is the superclass for HDF4/5 Dataset, inheriting the HObject.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>Datatype</B></TD>
<TD>Datatype holds a (name, value) pair of HDF4/5 attribute.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>Group</B></TD>
<TD>Group is the superclass for HDF4 and HDF5 group, inheriting the HObject.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>H4Datatype</B></TD>
<TD>Datatype holds a (name, value) pair of HDF4/5 attribute.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>H4File</B></TD>
<TD>This class provides file level APIs.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>H4GRImage</B></TD>
<TD>H4GRImage describes HDF4 general raster(GR) image and operations performed on
 the GR image.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>H4Group</B></TD>
<TD>An H4Group is a vgroup in HDF4, inheriting from Group.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>H4SDS</B></TD>
<TD>H4SDS describes HDF4 Scientific Data Sets (SDS) and operations performed on
 the SDS.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>H4Vdata</B></TD>
<TD>H4Vdata describes a multi-dimension array of HDF4 vdata, inheriting CompoundDS.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>H5CompoundDS</B></TD>
<TD>H5CompoundDS describes a multi-dimension array of HDF5 compound dataset,
 inheriting CompoundDS.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>H5Datatype</B></TD>
<TD>Datatype holds a (name, value) pair of HDF4/5 attribute.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>H5File</B></TD>
<TD>This class provides file level APIs.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>H5Group</B></TD>
<TD>An H5Group represents HDF5 group, inheriting from Group.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>H5ScalarDS</B></TD>
<TD>H5ScalarDS describes an multi-dimension array of HDF5 scalar or atomic data
 types and operations performed on the scalar dataset, such as byte, int,
 short, long, float, double and string.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>HObject</B></TD>
<TD>HObject is the superclass for HDF data hierarchy, inheriting the DataFormat
 interface.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD WIDTH="15%"><B>ScalarDS</B></TD>
<TD>ScalarDS is the superclass for HDF4/5 ScalarDS, inheriting Dataset.</TD>
</TR>
</TABLE>

<p>
<h2>
<a NAME="ug03application"></a>3.3 How to Use it</h2>

The HDF Object Package is used by Java applications to access HDF4 and
HDF5 files without directly calling the HDF4 and HDF5 library APIs. Library
calls are encapsulated into respective classes. The HDF Object Package
requires the
<a href="http://hdf.ncsa.uiuc.edu/hdf-java-html/JNI/jhi/index.html">
NCSA Java HDF Interface (JHI)</a> 
and the
<a href="http://hdf.ncsa.uiuc.edu/hdf-java-html/JNI/jhi5/index.html">
NCSA Java HDF5 Interface (JHI5)</a>. 

<center>
<p><img SRC="images/hdf-obj.jpg" height=750 width=630>
<br><b>Figure 3.2 The Software packages</b></center>

<p>
<br>
The following examples show how to retreve file hierarchy using
the HDF object package.

<h3>Example 3.1: retrieve and print HDF5 objects </h3>

<pre>
import ncsa.hdf.object.*; // include the HDF object package
import ncsa.hdf.hdf5lib.*; // include the Java HDF5 interface

/**
 * Retreve and print HDF5 objects from file hdf5_test.h5</a>
 * @version 1.3.0 10/26/2001
 * @author Peter X. Cao
 *
 */
public class TestH5File
{
    public static void main(String[] argv)
    {
        // create an H5File object
        H5File h5file = new H5File("hdf5_test.h5", HDF5Constants.H5F_ACC_RDONLY);

        try 
        {
            // open file and retrieve the file structure
            h5file.open(); 
        } 
        catch (Exception ex)
        {
            System.out.println(ex);
        }

        javax.swing.tree.MutableTreeNode root = h5file.getRootNode();
        if (root != null)
        {
            printNode(root, "    ");
        }

        try { h5file.close(); }
        catch (Exception ex ) {}
    }

    // print out the data object recusively
    private static void printNode(javax.swing.tree.TreeNode node, String indent)
    {
        System.out.println(indent+node);

        int n = node.getChildCount();
        for (int i=0; i&lt;n; i++)
        {
            printNode(node.getChildAt(i), indent+"    ");
        }
    }
}
</pre>

<h3>Example 3.2: retrieve and print HDF4 objects </h3>

<pre>
import ncsa.hdf.object.*; // include the HDF object package
import ncsa.hdf.hdflib.*; // include the Java HDF5 interface

/**
 * Retreve and print HDF4 objects from file annras.hdf</a>.
 * @version 1.3.0 10/26/2001
 * @author Peter X. Cao
 *
 */

public class TestH4File
{
    public static void main(String[] argv)
    {
        // create an H4File object
        H4File h4file = new H4File("annras.hdf", HDFConstants.DFACC_READ);

        try 
        {
            // open file and retrieve the file structure
            h4file.open(); 
        } 
        catch (Exception ex)
        {
            System.out.println(ex);
        }

        javax.swing.tree.MutableTreeNode root = h4file.getRootNode();
        if (root != null)
        {
            printNode(root, "    ");
        }

        try { h4file.close(); }
        catch (Exception ex ) {}
    }

    // print out the data object recusively
    private static void printNode(javax.swing.tree.TreeNode node, String indent)
    {
        System.out.println(indent+node);

        int n = node.getChildCount();
        for (int i=0; i&lt;n; i++)
        {
            printNode(node.getChildAt(i), indent+"    ");
        }
    }
}

</pre>

<!-- BEGIN OF FOOTER INFO -->
<p>
<hr noshade size=1><a href="http://www.ncsa.uiuc.edu/">
<img SRC="http://www.ncsa.uiuc.edu/Images/NCSAhome/footerlogo.gif" ALT="NCSA" BORDER=0 ></a>
<br><font face="arial,helvetica" size=-1>
<a href="http://www.ncsa.uiuc.edu/">
The National Center for Supercomputing Applications</a></font>
<br><font face="arial,helvetica" size=-1>
<a href="http://www.uiuc.edu/">University
of Illinois at Urbana-Champaign</a></font>
<br><font face="arial,helvetica" size=-1>
<a href="mailto:hdfhelp@ncsa.uiuc.edu">hdfhelp@ncsa.uiuc.edu</a></font>
<p>
<i><font color="#FF0000" size=-1>Updated 6/25/2002</font></i>
<!- END OF FOOTER INFO -->

</body>
</html>
