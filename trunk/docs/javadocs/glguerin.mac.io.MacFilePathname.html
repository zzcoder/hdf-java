<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN""http://www.w3.org/TR/REC-html40/loose.dtd>
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Thu Dec 06 12:08:08 CST 2001-->
<TITLE>
Class glguerin.mac.io.MacFilePathname
</TITLE>
</HEAD>
<BODY>
<A NAME="_top_"><!-- --></A>
<PRE>
<A HREF="packages.html">All Packages</A>  <A HREF="tree.html">Class Hierarchy</A>  <A HREF="package-glguerin.mac.io.html">This Package</A>  <A HREF="glguerin.mac.io.MacEscaping.html">Previous</A>  Next  <A HREF="index-1.html">Index</A></PRE>
<HR>
<H2>
Class glguerin.mac.io.MacFilePathname
</H2>
<PRE>
java.lang.Object
    |
    +----<A HREF="glguerin.io.Path.html">glguerin.io.Path</A>
            |
            +----<A HREF="glguerin.io.FilePathname.html">glguerin.io.FilePathname</A>
                    |
                    +----glguerin.mac.io.MacFilePathname
</PRE>
<HR>
<DL>
<DT>public class <B>MacFilePathname</B><DT>extends <A HREF="glguerin.io.FilePathname.html">FilePathname</A></DL>
A MacFilePathname extends the behavior and features of FilePathname to
 be aware of certain Mac-specific constructs.  These are:
<ol>
   <li> when converting between Files and MacFilePathnames, escaping is taken into account.
   <li> the ability to produce Mac-native Paths, i.e. colon-separated and unescaped.
</ol>
<p>
 Just like a FilePathname, but unlike a File, a MacFilePathname only operates on
 parts that represent the elements of a name -- it makes no reference to the actual file-system.
 That is, you can't do MacFilePathname.exists() or MacFilePathname.length() to discover
 things about the targeted file-system object.  Of course, it's pretty easy to use
 getPath() in a File constructor to make a File of interest.  
 And since MacFilePathname.getPath() is aware of escaping, things won't break on
 names with literal slashes or percents in them.
 You can also, of course, use a MacFileForker for many of the methods you
 might use a File for.
<p>
 File-name escaping is handled using the MacEscaping class.
 Internally, parts are kept in unescaped form, so Path.append() is overridden here.
 Each instance of MacFilePathname has an internal flag that tells it whether to use
 escaping or not.  The initial state of that flag comes from the public static boolean variable
 <b>defaultEscaping</b>.  That static variable is initially 
 set to <b>MacEscaping.platformUsesEscapes()</b>,
 but you can change it at any time.
<p>
 Since each MacFilePathname has its own internal sense of escaping, you can
 invoke <b>setEscaping( boolean )</b> any time you need to change that state.
 You can examine the current state with <b>boolean getEscaping()</b>.
<p>
 Mac-native path-name formats are returned from <b>getMacPath().</b>
 The <b>appendMacPath( String )</b> method parses a String in Mac-native form
 and appends the parts.  Mac-native name forms are never escaped, regardless
 of the state of the internal escaping flag.
<p>
 No methods in this class are synchronized, even when a thread-safety issue
 is known to exist.
 If you need thread-safety you must provide it yourself.  
 The most common uses of this class do not involve shared access
 by multiple threads, so synchronizing seemed like a time-wasting overkill.
 If you disagree, you have the source...
<P>
<DL>
<DT><B>Author:</B> <DD>Gregory Guerin
</DD>
<DT><B>See Also:</B><DD><A HREF="glguerin.io.FilePathname.html">FilePathname</A>, <A HREF="glguerin.io.Path.html">Path</A>, MacFileForker, <A HREF="glguerin.mac.io.MacEscaping.html">MacEscaping</A></DL>
<HR>

<P>
<A NAME="index"><!-- --></A><H2>
<IMG SRC="images/variable-index.gif" WIDTH="207" HEIGHT="38" ALT="Variable Index">
</H2>
<DL>
<DT><IMG SRC="images/blue-ball-small.gif" WIDTH="6" HEIGHT="6" ALT=" o ">
<A HREF="#defaultEscaping">defaultEscaping</A><DD>The value of this static field is copied to the initial state of
 a MacFilePathname's escaping-state at instantiation.
</DL>
<H2>
<IMG SRC="images/constructor-index.gif" WIDTH="275" HEIGHT="38" ALT="Constructor Index">
</H2>
<DL>
<DT><IMG SRC="images/yellow-ball-small.gif" WIDTH="6" HEIGHT="6" ALT=" o ">
<A HREF="#MacFilePathname()">MacFilePathname</A>()
<DD>Create with no parts.
<DT><IMG SRC="images/yellow-ball-small.gif" WIDTH="6" HEIGHT="6" ALT=" o ">
<A HREF="#MacFilePathname(java.io.File)">MacFilePathname</A>(File)
<DD>Create by copying parts from a File, with this instance set to default escaping state.
<DT><IMG SRC="images/yellow-ball-small.gif" WIDTH="6" HEIGHT="6" ALT=" o ">
<A HREF="#MacFilePathname(glguerin.mac.io.MacFilePathname)">MacFilePathname</A>(MacFilePathname)
<DD>Create by copying initial escaping state and parts from the other MacFilePathname.
</DL>
<H2>
<IMG SRC="images/method-index.gif" WIDTH="207" HEIGHT="38" ALT="Method Index">
</H2>
<DL>
<DT><IMG SRC="images/red-ball-small.gif" WIDTH="6" HEIGHT="6" ALT=" o ">
<A HREF="#append(java.lang.String)">append</A>(String)
<DD>Override Path.append() to add the given part after converting it from 
 escaped to literal form, as indicated by this instance's current escaping state.
<DT><IMG SRC="images/red-ball-small.gif" WIDTH="6" HEIGHT="6" ALT=" o ">
<A HREF="#appendFrom(glguerin.mac.io.MacFilePathname)">appendFrom</A>(MacFilePathname)
<DD>Append from the given MacFilePathname, copying its parts but NOT its escaping.
<DT><IMG SRC="images/red-ball-small.gif" WIDTH="6" HEIGHT="6" ALT=" o ">
<A HREF="#appendMacPath(java.lang.String)">appendMacPath</A>(String)
<DD>Append the parts parsed from the Mac-native path-name,
 ensuring that escaping is not applied.
<DT><IMG SRC="images/red-ball-small.gif" WIDTH="6" HEIGHT="6" ALT=" o ">
<A HREF="#getEscaping()">getEscaping</A>()
<DD>Return true if this instance is escaping its parts, false if not.
<DT><IMG SRC="images/red-ball-small.gif" WIDTH="6" HEIGHT="6" ALT=" o ">
<A HREF="#getLast()">getLast</A>()
<DD>Return the last part, escaped according to the current internal state.
<DT><IMG SRC="images/red-ball-small.gif" WIDTH="6" HEIGHT="6" ALT=" o ">
<A HREF="#getMacPath()">getMacPath</A>()
<DD>Return a String consisting of the Path parts separated by colons,
 in a Mac-native absolute-path form, and without escaping any of the parts.
<DT><IMG SRC="images/red-ball-small.gif" WIDTH="6" HEIGHT="6" ALT=" o ">
<A HREF="#getPart(int)">getPart</A>(int)
<DD>Return the indexed part, escaped according to the current internal state.
<DT><IMG SRC="images/red-ball-small.gif" WIDTH="6" HEIGHT="6" ALT=" o ">
<A HREF="#getParts()">getParts</A>()
<DD>Return a new array holding all the parts, escaped according to the current internal state.
<DT><IMG SRC="images/red-ball-small.gif" WIDTH="6" HEIGHT="6" ALT=" o ">
<A HREF="#getPath()">getPath</A>()
<DD>Return a String consisting of the Path parts separated by File.separatorChar,
 with a leading separator to indicate an absolute path-name, and with parts
 escaped or not according to the instance's current state.
<DT><IMG SRC="images/red-ball-small.gif" WIDTH="6" HEIGHT="6" ALT=" o ">
<A HREF="#setEscaping(boolean)">setEscaping</A>(boolean)
<DD>Set the state of escaping to the given flag, returning the prior state.
<DT><IMG SRC="images/red-ball-small.gif" WIDTH="6" HEIGHT="6" ALT=" o ">
<A HREF="#setFrom(glguerin.mac.io.MacFilePathname)">setFrom</A>(MacFilePathname)
<DD>Set from the given MacFilePathname, copying its parts and escaping.
<DT><IMG SRC="images/red-ball-small.gif" WIDTH="6" HEIGHT="6" ALT=" o ">
<A HREF="#toEscapedForm(java.lang.String)">toEscapedForm</A>(String)
<DD>Transform the given String to an escaped form, whatever that may be.
<DT><IMG SRC="images/red-ball-small.gif" WIDTH="6" HEIGHT="6" ALT=" o ">
<A HREF="#toLiteralForm(java.lang.String)">toLiteralForm</A>(String)
<DD>Transform the given String to a literal (unescaped) form, whatever that may be.
</DL>
<A NAME="variables"><!-- --></A><H2>
<IMG SRC="images/variables.gif" WIDTH="153" HEIGHT="38" ALT="Field Detail">
</H2>
<A NAME="defaultEscaping"><IMG SRC="images/blue-ball.gif" WIDTH="12" HEIGHT="12" ALT=" o ">
</A><B>defaultEscaping</B><PRE>
public static boolean <B>defaultEscaping</B></PRE>
<DL>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The value of this static field is copied to the initial state of
 a MacFilePathname's escaping-state at instantiation.
 Change this value if you want new MacFilePathname's to have different
 default escaping behavior.
 This field is initialized from <b>MacEscaping.platformUsesEscapes()</b>,
 which is usually the right thing to do.</DL>
<A NAME="constructors"><!-- --></A><H2>
<IMG SRC="images/constructors.gif" WIDTH="231" HEIGHT="38" ALT="Constructor Detail">
</H2>
<A NAME="MacFilePathname()"><IMG SRC="images/yellow-ball.gif" WIDTH="12" HEIGHT="12" ALT=" o ">
</A><B>MacFilePathname</B><PRE>
public <B>MacFilePathname</B>()</PRE>
<DL>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create with no parts.
 Initially set my escaping state from current state of static field defaultEscaping.</DL>
<A NAME="MacFilePathname(java.io.File)"><IMG SRC="images/yellow-ball.gif" WIDTH="12" HEIGHT="12" ALT=" o ">
</A><B>MacFilePathname</B><PRE>
public <B>MacFilePathname</B>(java.io.File theFile)</PRE>
<DL>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create by copying parts from a File, with this instance set to default escaping state.</DL>
<A NAME="MacFilePathname(glguerin.mac.io.MacFilePathname)"><IMG SRC="images/yellow-ball.gif" WIDTH="12" HEIGHT="12" ALT=" o ">
</A><B>MacFilePathname</B><PRE>
public <B>MacFilePathname</B>(<A HREF="">MacFilePathname</A> other)</PRE>
<DL>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create by copying initial escaping state and parts from the other MacFilePathname.</DL>
<A NAME="methods"><!-- --></A><H2>
<IMG SRC="images/methods.gif" WIDTH="151" HEIGHT="38" ALT="Method Detail">
</H2>
<A NAME="setFrom(glguerin.mac.io.MacFilePathname)"><IMG SRC="images/red-ball.gif" WIDTH="12" HEIGHT="12" ALT=" o ">
</A><A NAME="setFrom"><B>setFrom</B></A><PRE>
public void <B>setFrom</B>(<A HREF="">MacFilePathname</A> other)</PRE>
<DL>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set from the given MacFilePathname, copying its parts and escaping.</DL>
<A NAME="appendFrom(glguerin.mac.io.MacFilePathname)"><IMG SRC="images/red-ball.gif" WIDTH="12" HEIGHT="12" ALT=" o ">
</A><A NAME="appendFrom"><B>appendFrom</B></A><PRE>
public void <B>appendFrom</B>(<A HREF="">MacFilePathname</A> other)</PRE>
<DL>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append from the given MacFilePathname, copying its parts but NOT its escaping.
 The other's escaping is only used temporarily, while appending the other's parts,
 then this's original escaping is restored.</DL>
<A NAME="getEscaping()"><IMG SRC="images/red-ball.gif" WIDTH="12" HEIGHT="12" ALT=" o ">
</A><A NAME="getEscaping"><B>getEscaping</B></A><PRE>
public boolean <B>getEscaping</B>()</PRE>
<DL>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return true if this instance is escaping its parts, false if not.<DD><DL>
<DT><B>See Also:</B><DD><A HREF="#setEscaping(boolean)">setEscaping</A></DL>
</DD>
</DL>
<A NAME="setEscaping(boolean)"><IMG SRC="images/red-ball.gif" WIDTH="12" HEIGHT="12" ALT=" o ">
</A><A NAME="setEscaping"><B>setEscaping</B></A><PRE>
public boolean <B>setEscaping</B>(boolean useEscapes)</PRE>
<DL>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the state of escaping to the given flag, returning the prior state.
 If the escaping-state is false when some parts are appended that contain escapes,
 setting the state to true will have no effect on the existing parts.
 These time-sensitive semantics also affect how getPath() and toString()
 convert the internal parts into returned values.
<p>
 Returning the prior state is a convenience in some cases where that prior
 state must be restored after escaping is temporarily disabled.
 To be thread-safe, this method should operate atomically,
 though it takes no such precautions.  That is, this method isn't thread-safe.<DD><DL>
<DT><B>See Also:</B><DD><A HREF="#getEscaping()">getEscaping</A>, <A HREF="#getPath()">getPath</A>, <A HREF="glguerin.io.Path.html#toString()">toString</A></DL>
</DD>
</DL>
<A NAME="getLast()"><IMG SRC="images/red-ball.gif" WIDTH="12" HEIGHT="12" ALT=" o ">
</A><A NAME="getLast"><B>getLast</B></A><PRE>
public java.lang.String <B>getLast</B>()</PRE>
<DL>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the last part, escaped according to the current internal state.<DD><DL>
<DT><B>See Also:</B><DD><A HREF="#getEscaping()">getEscaping</A>, <A HREF="glguerin.io.Path.html#last()">last</A></DL>
</DD>
</DL>
<A NAME="getPart(int)"><IMG SRC="images/red-ball.gif" WIDTH="12" HEIGHT="12" ALT=" o ">
</A><A NAME="getPart"><B>getPart</B></A><PRE>
public java.lang.String <B>getPart</B>(int index)</PRE>
<DL>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the indexed part, escaped according to the current internal state.<DD><DL>
<DT><B>See Also:</B><DD><A HREF="#getEscaping()">getEscaping</A>, <A HREF="glguerin.io.Path.html#getPart(int, boolean)">getPart( int, boolean )</A></DL>
</DD>
</DL>
<A NAME="getParts()"><IMG SRC="images/red-ball.gif" WIDTH="12" HEIGHT="12" ALT=" o ">
</A><A NAME="getParts"><B>getParts</B></A><PRE>
public java.lang.String[] <B>getParts</B>()</PRE>
<DL>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return a new array holding all the parts, escaped according to the current internal state.<DD><DL>
<DT><B>See Also:</B><DD><A HREF="#getEscaping()">getEscaping</A>, <A HREF="glguerin.io.Path.html#getParts(boolean)">getParts( boolean )</A></DL>
</DD>
</DL>
<A NAME="getMacPath()"><IMG SRC="images/red-ball.gif" WIDTH="12" HEIGHT="12" ALT=" o ">
</A><A NAME="getMacPath"><B>getMacPath</B></A><PRE>
public java.lang.String <B>getMacPath</B>()</PRE>
<DL>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return a String consisting of the Path parts separated by colons,
 in a Mac-native absolute-path form, and without escaping any of the parts.
 Since escaping is only needed for Java's representation of file-names,
 a Mac-native name should never be escaped.
<p>
 An absolute Mac-native path normally contains a volume-name and
 an item-name (file or folder), so there must normally be at least two parts in
 this MacFilePathname in order to produce a well-formed Mac-native path name.
 If this method sees that there are not two parts to work with, it
 returns either an empty string (no parts) or a single name with a trailing colon
 (1 part).  The latter representation refers to the root directory of a named volume.
 The no-part representation refers to nothing, and is not a valid Mac-native path name.</DL>
<A NAME="appendMacPath(java.lang.String)"><IMG SRC="images/red-ball.gif" WIDTH="12" HEIGHT="12" ALT=" o ">
</A><A NAME="appendMacPath"><B>appendMacPath</B></A><PRE>
public void <B>appendMacPath</B>(java.lang.String macPathName)</PRE>
<DL>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Append the parts parsed from the Mac-native path-name,
 ensuring that escaping is not applied.
 Since escaping is only needed for Java's representation of file-names,
 a Mac-native name is never escaped, and never converted from escaped form.
<p>
 The semantic construct "::" meaning "parent-directory-of" is not covered
 by this method.  This method uses a simple parsing of macPathName by the ":" separator.
<p>
 This method only appends, so if you want to set the entire path
 you should clear() this first.</DL>
<A NAME="toEscapedForm(java.lang.String)"><IMG SRC="images/red-ball.gif" WIDTH="12" HEIGHT="12" ALT=" o ">
</A><A NAME="toEscapedForm"><B>toEscapedForm</B></A><PRE>
public java.lang.String <B>toEscapedForm</B>(java.lang.String toTransform)</PRE>
<DL>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Transform the given String to an escaped form, whatever that may be.
 Must accept null or zero-length Strings, and return them without error or exception.
<p>
 This method must always perform a transformation, regardless of any internal
 state indicating whether escapes are in use or not.
 That is, this is strictly a transforming method, not a state-sensitive accessor method.
<p>
 This implementation use MacEscaping.toEscapedName() to transform the argument.<DD><DL>
<DT><B>Overrides:</B><DD><A HREF="glguerin.io.Path.html#toEscapedForm(java.lang.String)">toEscapedForm</A> in class <A HREF="glguerin.io.Path.html">Path</A></DL>
</DD>
</DL>
<A NAME="toLiteralForm(java.lang.String)"><IMG SRC="images/red-ball.gif" WIDTH="12" HEIGHT="12" ALT=" o ">
</A><A NAME="toLiteralForm"><B>toLiteralForm</B></A><PRE>
public java.lang.String <B>toLiteralForm</B>(java.lang.String toTransform)</PRE>
<DL>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Transform the given String to a literal (unescaped) form, whatever that may be.
 Must accept null or zero-length Strings, and return them without error or exception.
<p>
 This method must always perform a transformation, regardless of any internal
 state indicating whether escapes are in use or not.
 That is, this is strictly a transforming method, not a state-sensitive accessor method.
<p>
 This implementation use MacEscaping.toLiteralName() to transform the argument.<DD><DL>
<DT><B>Overrides:</B><DD><A HREF="glguerin.io.Path.html#toLiteralForm(java.lang.String)">toLiteralForm</A> in class <A HREF="glguerin.io.Path.html">Path</A></DL>
</DD>
</DL>
<A NAME="append(java.lang.String)"><IMG SRC="images/red-ball.gif" WIDTH="12" HEIGHT="12" ALT=" o ">
</A><A NAME="append"><B>append</B></A><PRE>
public void <B>append</B>(java.lang.String toAppend)</PRE>
<DL>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Override Path.append() to add the given part after converting it from 
 escaped to literal form, as indicated by this instance's current escaping state.
 That is, this implementation is sensitive to the current escaping state.
<p>
 If you wanted to forcibly truncate each part to the 31-byte limit imposed by
 the Mac OS, this would be the place to do it.  You'd have to apply this on the
 byte-array representation, encoded appropriately, since a 31-UniCode-character
 String may encode as more or less than 31 bytes, depending on what character
 values it contains.  For example, 31 Katakana chars will encode to be longer than 31 ASCII chars.
<p>
 An alternative to quiet truncation is to throw an IllegalArgumentException,
 which need not be declared as thrown by this method, since it's a RuntimeException.
 I don't do that since I wanted to be more flexible.
 If you disagree, you have the source...<DD><DL>
<DT><B>Overrides:</B><DD><A HREF="glguerin.io.Path.html#append(java.lang.String)">append</A> in class <A HREF="glguerin.io.Path.html">Path</A><DT><B>See Also:</B><DD><A HREF="glguerin.io.Path.html#append(java.lang.String)">append</A>, toLiteralForm</DL>
</DD>
</DL>
<A NAME="getPath()"><IMG SRC="images/red-ball.gif" WIDTH="12" HEIGHT="12" ALT=" o ">
</A><A NAME="getPath"><B>getPath</B></A><PRE>
public java.lang.String <B>getPath</B>()</PRE>
<DL>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return a String consisting of the Path parts separated by File.separatorChar,
 with a leading separator to indicate an absolute path-name, and with parts
 escaped or not according to the instance's current state.<DD><DL>
<DT><B>Overrides:</B><DD><A HREF="glguerin.io.FilePathname.html#getPath()">getPath</A> in class <A HREF="glguerin.io.FilePathname.html">FilePathname</A></DL>
</DD>
</DL>
<HR>
<PRE>
<A HREF="packages.html">All Packages</A>  <A HREF="tree.html">Class Hierarchy</A>  <A HREF="package-glguerin.mac.io.html">This Package</A>  <A HREF="glguerin.mac.io.MacEscaping.html">Previous</A>  Next  <A HREF="index-1.html">Index</A></PRE>

</BODY>
</HTML>
