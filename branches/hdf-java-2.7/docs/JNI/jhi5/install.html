<?php
include ("../../../links.php"); 
include ("../../../includes/header.html"); 
?>
<table width="100%">
  <tr>
  <td width="60%" bgcolor="#dbeaf5">
    <h1>NCSA Java HDF5 Interface (JHI5)</h1>  </td>
  <td align="center"><h3>
    <a href="#download">Download</a></h3></td>
  <td align="center"><h3>
    <a href="jhi5.html">JHI5 Design Notes</a></h3></td>
  </tr>
</table>
<hr>
<p><h2>Installing NCSA Java HDF-5 Interface (JHI5)</h2></p>
<h3>
Installation Instructions</h3>
The Java HDF-5 Interface is distributed as source code and as pre-built
binaries for selected platforms.
<p>When installed on a system, the JHI5 consists of two parts, the Java
classes and the jhdf5 native library (which includes the HDF-5 library).
The Java classes are the same for every platform, but the jhdf5 library
must be built for each platform.
<p>The usual installation would be something like:
<blockquote>
<pre><b><tt>&lt;JHI5DIR>/lib/
 jhdf5.jar
 solaris/
 libjhdf5.so</tt></b></pre>
</blockquote>
for a solaris platform, installed in a directory <b><tt>&lt;JHI5DIR></tt></b>.
Other platforms would have the same JAR file, but a different <tt>libjhdf5.a</tt>
<p>At run time, the environment must be set to include the path to the
JAR file in <tt>CLASSPATH</tt>, and the dynamically loaded library in <tt>LD_LIBRARY_PATH</tt>
(on Unix) or <tt>PATH</tt> (Windows98/NT).
<p>
<hr noshade size="1">
<h2>
Building From Source</h2>

<h3>
Prerequisites:</h3>

<ul class="ul">
<li class="li2">
<b>A C compiler.</b> The JHI5 must build and link C code and the HDF-5
library.</li>

<li class="li2">
<b>Java JDK 1.2 or equivalent.</b> If JDK 1.2 is not installed, check for
availablilty from the vendor or from: <a href="http://java.sun.com/products">http://java.sun.com/products</a>
Install according to directions.</li>

<br>If JDK 1.2 is not available for your platform, JDK 1.1.x will probably
work with small adjustments to the Makefiles.
<li class="li2">
<b>The HDF-5 library, Version 1.4.2-patch1.</b> The JHI5 requires the
<i>static</i>
HDF-5 Library, <b>libhdf5.a</b>.* If HDF-5 is not installed, obtain
pre-compiled binaries or full source from: <a href="/register5.html">/register5.html</a></li>

<br>Install HDF5 according to the instructions.
<ul class="ul">
<li class="li2">
The HDF-5 library requires the GZIP library (<b>libz.a</b>). If this is
not installed, it can be obtained from the HDF FTP site.</li>
</ul>
</ul>
<p>
<table BORDER bgcolor="#f4f4f4">
<tr>
<td>* <b>Note</b>: The Java HDF-5 Interface builds a dynamically loaded
C library (e.g., <i>libjhdf5.so</i>), which is loaded by the Java Virtual
Machine. This wrapper code depends on HDF-5 (<b>libhdf5</b>), which in
turn requires GZIP (<b>libz</b>). On all Unix systems tested so far, the
JVM cannot resolve these dependencies if the <b>libhdf5</b> and <b>libz</b>
are dynamic libraries. For this reason, it is necessary to link the <b>libjhdf5.so</b>
with the <b><i>static</i></b> versions of <b>libhdf5.a</b> and <b>libz.a</b>,
and then create a <b><i>dynamic</i></b> library, <b>libjhdf5.so</b>. The
<i>configure</i>
script and <i>Makefile</i> implement this requirement.</td>
</tr>
</table>
<p><hr>
<h2>
Building:</h2>
The Java HDF-5 Interface consists of Java classes and C code to implement
native methods. The C code links to the HDF-5 library.

<p><b><i>Unix:</i></b>
<p>For a Unix system, run the automatic configuration program:
<blockquote><i>./configure</i></blockquote>
This program requests the location of the prerequisite HDF-5 and GZIP libraries
and the Java development tools, and
<br>generates <i>Makefile</i>s with appropriate paths. For a platform not
tested by NCSA, it may be necessary to adjust the <i>Makefile</i>s that
are generated.
<p>To build, type:
<blockquote><i>make</i></blockquote>
To install the Java HDF-5 Interface library and JAR file, type:
<blockquote><i>make install</i></blockquote>

<b><i>Windows:</i></b>
<p>For a Windows 95/98/NT system, there will be two steps to build the
JHI5.<hr>
<h4>
Build the dynamic link library jhdf5.dll</h4><p>
The building procedure depends on what C/C++ compiler you are using. You
will need two things to build the <i>jhdf5.dll</i>,
<ol>
<li class="li2">
<b>the HDF5 library</b></li>

<li class="li2">
<b>the C source files</b>, which come with JHI5 source code. The files
are located at <i>your_jhi5_root/native</i>.</li>
</ol>
Afer you compile the dynamic link library <b>jhdf5.dll</b>, move or copy
it to <i>your_jhi5_root/lib/win</i>. <i>your_jhi5_root/lib/win/jhdf5.dll</i>
is loaded by the HDF5 Java native functions.<p>
<h4><hr>
Build the Java package of JHI5</h4><p>
A batch file to compile the JHI5 Java classes is provided at <i>your_jhi5_root/win32_make.bat</i>
to compile and pack the JHI5.
<p>Before you run the batch, edit <i>win32_make.bat</i> to set the JDK
path to the location of the JDK. For example,
<blockquote>
<pre><b>SET JAVAHOME=d:\java\jdk1.2.2</b></pre>
</blockquote>
The JHI5 root should be set to the directory in which the JHI5 will be
built.
<p>Then execute <i>win32_make.bat</i>.
<p>
<hr noshade size="1">
<h2>
Checking the installation: loading the library</h2>
The JHI5 dynamically loads the Java HDF-5 library containing the native
methods, and must also dynamically load the HDF-5 library. These libraries
must be available to the Java runtime through the environment. For JDK1.2,
the path is available in the '<b>java.library.path</b>' environment variable.
The exact path needed depends on the system and where the libraries are
installed.
<p>To help debug problems with these paths, the JHI5 distribution includes
a test program,
<b>etc/TestHDF5Link.java</b>. To test the JHI5 installation,
build and run the <b>TestHDF5Link</b> program. The output will report the
'<b>java.library.path</b>' and whether the JHI5 and HDF-5 library are correctly
loaded. If the <b>TestHDF5Link</b> program works, then its configuration
can be used by any program that needs to use the JHI5.
<p>
<hr noshade size="1">
<h2>
Sample Files and Programs</h2>

The JHI5 distribution includes some simple HDF5 files in the directory
<b>samples</b> and some examples programs in <b>tutorial</b>.
The example programs are Java versions of the example programs from the
HDF5 Tutorial and can also be found in the HDF5 Tutorial:
<ul class="ul"><a href="/HDF5/doc/Tutor/">/
HDF5/doc/Tutor/</a></ul>
The java programs illustrate how to call the Java HDF5 Interface, and should
produce identical HDF5 files as the example C programs in the HDF5 Tutorial.


<?php
include ("../../../includes/footer.html"); 
?>


